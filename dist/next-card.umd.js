(function(x,S){typeof exports=="object"&&typeof module<"u"?module.exports=S():typeof define=="function"&&define.amd?define(S):(x=typeof globalThis<"u"?globalThis:x||self,x.card=S())})(this,function(){"use strict";var x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var F={exports:{}},I={exports:{}},Q;function lr(){return Q||(Q=1,typeof self<"u"?I.exports=self:typeof window<"u"?I.exports=window:I.exports=Function("return this")()),I.exports}var P,U;function fr(){if(U)return P;U=1;var g=lr();return P=function(){return typeof x!="object"||!x||x.Math!==Math||x.Array!==Array?g:x},P}var q={exports:{}},dr=q.exports,W;function pr(){return W||(W=1,(function(){var g,a,l;g=function(e){return g.isDOMElement(e)?e:document.querySelectorAll(e)},g.isDOMElement=function(e){return e&&e.nodeName!=null},l=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g.trim=function(e){return e===null?"":(e+"").replace(l,"")},a=/\r/g,g.val=function(e,c){var f;return arguments.length>1?e.value=c:(f=e.value,typeof f=="string"?f.replace(a,""):f===null?"":f)},g.preventDefault=function(e){if(typeof e.preventDefault=="function"){e.preventDefault();return}return e.returnValue=!1,!1},g.normalizeEvent=function(e){var c;return c=e,e={which:c.which!=null?c.which:void 0,target:c.target||c.srcElement,preventDefault:function(){return g.preventDefault(c)},originalEvent:c,data:c.data||c.detail},e.which==null&&(e.which=c.charCode!=null?c.charCode:c.keyCode),e},g.on=function(e,c,f){var p,d,v,n,r,s,h,j;if(e.length){for(d=0,n=e.length;d<n;d++)p=e[d],g.on(p,c,f);return}if(c.match(" ")){for(j=c.split(" "),v=0,r=j.length;v<r;v++)s=j[v],g.on(e,s,f);return}if(h=f,f=function(b){return b=g.normalizeEvent(b),h(b)},e.addEventListener)return e.addEventListener(c,f,!1);if(e.attachEvent)return c="on"+c,e.attachEvent(c,f);e["on"+c]=f},g.addClass=function(e,c){var f;return e.length?function(){var p,d,v;for(v=[],p=0,d=e.length;p<d;p++)f=e[p],v.push(g.addClass(f,c));return v}():e.classList?e.classList.add(c):e.className+=" "+c},g.hasClass=function(e,c){var f,p,d,v;if(e.length){for(p=!0,d=0,v=e.length;d<v;d++)f=e[d],p=p&&g.hasClass(f,c);return p}return e.classList?e.classList.contains(c):new RegExp("(^| )"+c+"( |$)","gi").test(e.className)},g.removeClass=function(e,c){var f,p,d,v,n,r;if(e.length)return function(){var s,h,j;for(j=[],s=0,h=e.length;s<h;s++)p=e[s],j.push(g.removeClass(p,c));return j}();if(e.classList){for(n=c.split(" "),r=[],d=0,v=n.length;d<v;d++)f=n[d],r.push(e.classList.remove(f));return r}else return e.className=e.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ")},g.toggleClass=function(e,c,f){var p;if(e.length)return function(){var d,v,n;for(n=[],d=0,v=e.length;d<v;d++)p=e[d],n.push(g.toggleClass(p,c,f));return n}();if(f){if(!g.hasClass(e,c))return g.addClass(e,c)}else return g.removeClass(e,c)},g.append=function(e,c){var f;return e.length?function(){var p,d,v;for(v=[],p=0,d=e.length;p<d;p++)f=e[p],v.push(g.append(f,c));return v}():e.insertAdjacentHTML("beforeend",c)},g.find=function(e,c){return(e instanceof NodeList||e instanceof Array)&&(e=e[0]),e.querySelectorAll(c)},g.trigger=function(e,c,f){var p;try{p=new CustomEvent(c,{detail:f})}catch{p=document.createEvent("CustomEvent"),p.initCustomEvent?p.initCustomEvent(c,!0,!0,f):p.initEvent(c,!0,!0,f)}return e.dispatchEvent(p)},q.exports=g}).call(dr)),q.exports}var hr=F.exports,X;function gr(){return X||(X=1,(function(){var g,a,l,e,c,f,p,d,v,n,r,s,h,j,b,w,E,D,Y,sr,or,V,cr,Z,J,ur,G=[].indexOf||function(o){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===o)return t;return-1};b=fr()(),a=pr(),p=/(\d{1,4})/g,c=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"dankort",pattern:/^5019/,format:p,length:[16],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:p,length:[16],cvcLength:[3],luhn:!0},{type:"elo",pattern:/^401178|^401179|^431274|^438935|^451416|^457393|^457631|^457632|^504175|^627780|^636297|^636369|^636368|^(506699|5067[0-6]\d|50677[0-8])|^(50900\d|5090[1-9]\d|509[1-9]\d{2})|^65003[1-3]|^(65003[5-9]|65004\d|65005[0-1])|^(65040[5-9]|6504[1-3]\d)|^(65048[5-9]|65049\d|6505[0-2]\d|65053[0-8])|^(65054[1-9]|6505[5-8]\d|65059[0-8])|^(65070\d|65071[0-8])|^65072[0-7]|^(65090[1-9]|65091\d|650920)|^(65165[2-9]|6516[6-7]\d)|^(65500\d|65501\d)|^(65502[1-9]|6550[3-4]\d|65505[0-8])|^(65092[1-9]|65097[0-8])/,format:p,length:[16],cvcLength:[3],luhn:!0},{type:"hipercard",pattern:/^(384100|384140|384160|606282|637095|637568|60(?!11))/,format:p,length:[14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^(308[8-9]|309[0-3]|3094[0]{4}|309[6-9]|310[0-2]|311[2-9]|3120|315[8-9]|333[7-9]|334[0-9]|35)/,format:p,length:[16,19],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:p,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(50|5[6-9]|6007|6220|6304|6703|6708|6759|676[1-3])/,format:p,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^(5[1-5]|677189)|^(22[2-9][1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,format:p,length:[16],cvcLength:[3],luhn:!0},{type:"mir",pattern:/^220[0-4][0-9][0-9]\d{10}$/,format:p,length:[16],cvcLength:[3],luhn:!0},{type:"troy",pattern:/^9792/,format:p,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:p,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:p,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:p,length:[13,16],cvcLength:[3],luhn:!0}],l=function(o){var t,i,u,y,m;for(o=(o+"").replace(/\D/g,""),i=void 0,u=0,y=c.length;u<y;u++)t=c[u],(m=o.match(t.pattern))&&(!i||m[0].length>i[1][0].length)&&(i=[t,m]);return i&&i[0]},e=function(o){var t,i,u;for(i=0,u=c.length;i<u;i++)if(t=c[i],t.type===o)return t},E=function(o){var t,i,u,y,m,C;for(m=!0,C=0,i=(o+"").split("").reverse(),u=0,y=i.length;u<y;u++)t=i[u],t=parseInt(t,10),(m=!m)&&(t*=2),t>9&&(t-=9),C+=t;return C%10===0},w=function(o){var t;try{if(o.selectionStart!=null&&o.selectionStart!==o.selectionEnd||(typeof document<"u"&&document!==null&&(t=document.selection)!=null?t.createRange:void 0)!=null&&document.selection.createRange().text)return!0}catch{}return!1},D=function(o){return setTimeout(function(t){return function(){var i,u;return i=o.target,u=a.val(i),u=g.fns.formatCardNumber(u),f(i,u),a.trigger(i,"change")}}())},n=function(o){return function(t){var i,u,y,m,C,$,N,O,K,k,A;if(t.which>0?(u=String.fromCharCode(t.which),A=a.val(t.target)+u):(u=t.data,A=a.val(t.target)),!!/^\d+$/.test(u)){for(O=t.target,i=l(A),$=A.replace(/\D/g,"").length,k=[16],i&&(k=i.length),o&&(k=k.filter(function(xr){return xr<=o})),y=m=0,C=k.length;m<C;y=++m)if(K=k[y],!($>=K&&k[y+1])&&$>=K)return;if(!w(O)&&(i&&i.type==="amex"?N=/^(\d{4}|\d{4}\s\d{6})$/:N=/(?:^|\s)(\d{4})$/,A=A.substring(0,A.length-1),N.test(A)))return t.preventDefault(),a.val(O,A+" "+u),a.trigger(O,"change")}}},d=function(o){var t,i;if(t=o.target,i=a.val(t),!o.meta&&o.which===8&&!w(t)){if(/\d\s$/.test(i))return o.preventDefault(),a.val(t,i.replace(/\d\s$/,"")),a.trigger(t,"change");if(/\s\d?$/.test(i))return o.preventDefault(),a.val(t,i.replace(/\s\d?$/,"")),a.trigger(t,"change")}},r=function(o){var t,i,u;if(i=o.target,o.which>0?(t=String.fromCharCode(o.which),u=a.val(i)+t):(t=o.data,u=a.val(i)),!!/^\d+$/.test(t)){if(/^\d$/.test(u)&&u!=="0"&&u!=="1")return o.preventDefault(),a.val(i,"0"+u+" / "),a.trigger(i,"change");if(/^\d\d$/.test(u))return o.preventDefault(),a.val(i,u+" / "),a.trigger(i,"change")}},j=function(o){var t,i,u;if(t=String.fromCharCode(o.which),!!/^\d+$/.test(t)){if(i=o.target,u=a.val(i)+t,/^\d$/.test(u)&&u!=="0"&&u!=="1")return o.preventDefault(),a.val(i,"0"+u),a.trigger(i,"change");if(/^\d\d$/.test(u))return o.preventDefault(),a.val(i,""+u),a.trigger(i,"change")}},s=function(o){var t,i,u;if(t=String.fromCharCode(o.which),!!/^\d+$/.test(t)&&(i=o.target,u=a.val(i),/^\d\d$/.test(u)))return a.val(i,u+" / "),a.trigger(i,"change")},h=function(o){var t,i,u;if(t=String.fromCharCode(o.which),t==="/"&&(i=o.target,u=a.val(i),/^\d$/.test(u)&&u!=="0"))return a.val(i,"0"+u+" / "),a.trigger(i,"change")},v=function(o){var t,i;if(!o.metaKey&&(t=o.target,i=a.val(t),o.which===8&&!w(t))){if(/\d(\s|\/)+$/.test(i))return o.preventDefault(),a.val(t,i.replace(/\d(\s|\/)*$/,"")),a.trigger(t,"change");if(/\s\/\s?\d?$/.test(i))return o.preventDefault(),a.val(t,i.replace(/\s\/\s?\d?$/,"")),a.trigger(t,"change")}},Z=function(o){var t;if(o.metaKey||o.ctrlKey)return!0;if(o.which===32)return o.preventDefault();if(o.which===0||o.which<33)return!0;if(t=String.fromCharCode(o.which),!/[\d\s]/.test(t))return o.preventDefault()},sr=function(o){return function(t){var i,u,y,m,C;if(m=t.target,u=String.fromCharCode(t.which),!!/^\d+$/.test(u)&&!w(m)&&(C=(a.val(m)+u).replace(/\D/g,""),i=l(C),y=16,i&&(y=i.length[i.length.length-1]),o&&(y=Math.min(y,o)),!(C.length<=y)))return t.preventDefault()}},V=function(o,t){var i,u,y;if(u=o.target,i=String.fromCharCode(o.which),!!/^\d+$/.test(i)&&!w(u)&&(y=a.val(u)+i,y=y.replace(/\D/g,""),y.length>t))return o.preventDefault()},or=function(o){return V(o,6)},cr=function(o){return V(o,2)},J=function(o){return V(o,4)},Y=function(o){var t,i,u;if(i=o.target,t=String.fromCharCode(o.which),!!/^\d+$/.test(t)&&!w(i)&&(u=a.val(i)+t,!(u.length<=4)))return o.preventDefault()},ur=function(o){var t,i,u,y,m;if(y=o.target,m=a.val(y),u=g.fns.cardType(m)||"unknown",!a.hasClass(y,u))return t=function(){var C,$,N;for(N=[],C=0,$=c.length;C<$;C++)i=c[C],N.push(i.type);return N}(),a.removeClass(y,"unknown"),a.removeClass(y,t.join(" ")),a.addClass(y,u),a.toggleClass(y,"identified",u!=="unknown"),a.trigger(y,"payment.cardType",u)},f=function(o,t){var i;if(i=o.selectionEnd,a.val(o,t),i)return o.selectionEnd=i},g=function(){function o(){}return o.J=a,o.fns={cardExpiryVal:function(t){var i,u,y,m;return t=t.replace(/\s/g,""),y=t.split("/",2),i=y[0],m=y[1],m?.length===2&&/^\d+$/.test(m)&&(u=new Date().getFullYear(),u=u.toString().slice(0,2),m=u+m),i=parseInt(i,10),m=parseInt(m,10),{month:i,year:m}},validateCardNumber:function(t){var i,u;return t=(t+"").replace(/\s+|-/g,""),!/^\d+$/.test(t)||(i=l(t),!i)?!1:(u=t.length,G.call(i.length,u)>=0&&(i.luhn===!1||E(t)))},validateCardExpiry:function(t,i){var u,y,m,C,$;return typeof t=="object"&&"month"in t?(C=t,t=C.month,i=C.year):typeof t=="string"&&G.call(t,"/")>=0&&($=o.fns.cardExpiryVal(t),t=$.month,i=$.year),!(t&&i)||(t=a.trim(t),i=a.trim(i),!/^\d+$/.test(t))||!/^\d+$/.test(i)||(t=parseInt(t,10),!(t&&t<=12))?!1:(i.length===2&&(m=new Date().getFullYear(),m=m.toString().slice(0,2),i=m+i),y=new Date(i,t),u=new Date,y.setMonth(y.getMonth()-1),y.setMonth(y.getMonth()+1,1),y>u)},validateCardCVC:function(t,i){var u,y;return t=a.trim(t),/^\d+$/.test(t)?i&&e(i)?(u=t.length,G.call((y=e(i))!=null?y.cvcLength:void 0,u)>=0):t.length>=3&&t.length<=4:!1},cardType:function(t){var i;return t&&((i=l(t))!=null?i.type:void 0)||null},formatCardNumber:function(t){var i,u,y,m;return i=l(t),i?(m=i.length[i.length.length-1],t=t.replace(/\D/g,""),t=t.slice(0,m),i.format.global?(y=t.match(i.format))!=null?y.join(" "):void 0:(u=i.format.exec(t),u==null?void 0:(u.shift(),u=u.filter(function(C){return C}),u.join(" ")))):t}},o.restrictNumeric=function(t){return a.on(t,"keypress",Z),a.on(t,"input",Z)},o.cardExpiryVal=function(t){return o.fns.cardExpiryVal(a.val(t))},o.formatCardCVC=function(t){return o.restrictNumeric(t),a.on(t,"keypress",Y),a.on(t,"input",Y),t},o.formatCardExpiry=function(t){var i,u;return o.restrictNumeric(t),t.length&&t.length===2?(i=t[0],u=t[1],this.formatCardExpiryMultiple(i,u)):(a.on(t,"keypress",or),a.on(t,"keypress",r),a.on(t,"keypress",h),a.on(t,"keypress",s),a.on(t,"keydown",v),a.on(t,"input",r)),t},o.formatCardExpiryMultiple=function(t,i){return a.on(t,"keypress",cr),a.on(t,"keypress",j),a.on(t,"input",j),a.on(i,"keypress",J),a.on(i,"input",J)},o.formatCardNumber=function(t,i){return o.restrictNumeric(t),a.on(t,"keypress",sr(i)),a.on(t,"keypress",n(i)),a.on(t,"keydown",d),a.on(t,"keyup blur",ur),a.on(t,"blur",n(i)),a.on(t,"paste",D),a.on(t,"input",n(i)),t},o.getCardArray=function(){return c},o.setCardArray=function(t){return c=t,!0},o.addToCardArray=function(t){return c.push(t)},o.removeFromCardArray=function(t){var i,u;for(i in c)u=c[i],u.type===t&&c.splice(i,1);return!0},o}(),F.exports=g,b.Payment=g}).call(hr)),F.exports}var vr=gr();const L=S(vr);var M,rr;function yr(){if(rr)return M;rr=1;/**!
 * is
 * the definitive JavaScript type testing library
 *
 * @copyright 2013-2014 Enrico Marino / Jordan Harband
 * @license MIT
 */var g=Object.prototype,a=g.hasOwnProperty,l=g.toString,e;typeof Symbol=="function"&&(e=Symbol.prototype.valueOf);var c;typeof BigInt=="function"&&(c=BigInt.prototype.valueOf);var f=function(r){return r!==r},p={boolean:1,number:1,string:1,undefined:1},d=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,v=/^[A-Fa-f0-9]+$/,n={};return n.a=n.type=function(r,s){return typeof r===s},n.defined=function(r){return typeof r<"u"},n.empty=function(r){var s=l.call(r),h;if(s==="[object Array]"||s==="[object Arguments]"||s==="[object String]")return r.length===0;if(s==="[object Object]"){for(h in r)if(a.call(r,h))return!1;return!0}return!r},n.equal=function(s,h){if(s===h)return!0;var j=l.call(s),b;if(j!==l.call(h))return!1;if(j==="[object Object]"){for(b in s)if(!n.equal(s[b],h[b])||!(b in h))return!1;for(b in h)if(!n.equal(s[b],h[b])||!(b in s))return!1;return!0}if(j==="[object Array]"){if(b=s.length,b!==h.length)return!1;for(;b--;)if(!n.equal(s[b],h[b]))return!1;return!0}return j==="[object Function]"?s.prototype===h.prototype:j==="[object Date]"?s.getTime()===h.getTime():!1},n.hosted=function(r,s){var h=typeof s[r];return h==="object"?!!s[r]:!p[h]},n.instance=n.instanceof=function(r,s){return r instanceof s},n.nil=n.null=function(r){return r===null},n.undef=n.undefined=function(r){return typeof r>"u"},n.args=n.arguments=function(r){var s=l.call(r)==="[object Arguments]",h=!n.array(r)&&n.arraylike(r)&&n.object(r)&&n.fn(r.callee);return s||h},n.array=Array.isArray||function(r){return l.call(r)==="[object Array]"},n.args.empty=function(r){return n.args(r)&&r.length===0},n.array.empty=function(r){return n.array(r)&&r.length===0},n.arraylike=function(r){return!!r&&!n.bool(r)&&a.call(r,"length")&&isFinite(r.length)&&n.number(r.length)&&r.length>=0},n.bool=n.boolean=function(r){return l.call(r)==="[object Boolean]"},n.false=function(r){return n.bool(r)&&!Number(r)},n.true=function(r){return n.bool(r)&&!!Number(r)},n.date=function(r){return l.call(r)==="[object Date]"},n.date.valid=function(r){return n.date(r)&&!isNaN(Number(r))},n.element=function(r){return r!==void 0&&typeof HTMLElement<"u"&&r instanceof HTMLElement&&r.nodeType===1},n.error=function(r){return l.call(r)==="[object Error]"},n.fn=n.function=function(r){var s=typeof window<"u"&&r===window.alert;if(s)return!0;var h=l.call(r);return h==="[object Function]"||h==="[object GeneratorFunction]"||h==="[object AsyncFunction]"},n.number=function(r){return l.call(r)==="[object Number]"},n.infinite=function(r){return r===1/0||r===-1/0},n.decimal=function(r){return n.number(r)&&!f(r)&&!n.infinite(r)&&r%1!==0},n.divisibleBy=function(r,s){var h=n.infinite(r),j=n.infinite(s),b=n.number(r)&&!f(r)&&n.number(s)&&!f(s)&&s!==0;return h||j||b&&r%s===0},n.integer=n.int=function(r){return n.number(r)&&!f(r)&&r%1===0},n.maximum=function(r,s){if(f(r))throw new TypeError("NaN is not a valid value");if(!n.arraylike(s))throw new TypeError("second argument must be array-like");for(var h=s.length;--h>=0;)if(r<s[h])return!1;return!0},n.minimum=function(r,s){if(f(r))throw new TypeError("NaN is not a valid value");if(!n.arraylike(s))throw new TypeError("second argument must be array-like");for(var h=s.length;--h>=0;)if(r>s[h])return!1;return!0},n.nan=function(r){return!n.number(r)||r!==r},n.even=function(r){return n.infinite(r)||n.number(r)&&r===r&&r%2===0},n.odd=function(r){return n.infinite(r)||n.number(r)&&r===r&&r%2!==0},n.ge=function(r,s){if(f(r)||f(s))throw new TypeError("NaN is not a valid value");return!n.infinite(r)&&!n.infinite(s)&&r>=s},n.gt=function(r,s){if(f(r)||f(s))throw new TypeError("NaN is not a valid value");return!n.infinite(r)&&!n.infinite(s)&&r>s},n.le=function(r,s){if(f(r)||f(s))throw new TypeError("NaN is not a valid value");return!n.infinite(r)&&!n.infinite(s)&&r<=s},n.lt=function(r,s){if(f(r)||f(s))throw new TypeError("NaN is not a valid value");return!n.infinite(r)&&!n.infinite(s)&&r<s},n.within=function(r,s,h){if(f(r)||f(s)||f(h))throw new TypeError("NaN is not a valid value");if(!n.number(r)||!n.number(s)||!n.number(h))throw new TypeError("all arguments must be numbers");var j=n.infinite(r)||n.infinite(s)||n.infinite(h);return j||r>=s&&r<=h},n.object=function(r){return l.call(r)==="[object Object]"},n.primitive=function(s){return s?!(typeof s=="object"||n.object(s)||n.fn(s)||n.array(s)):!0},n.hash=function(r){return n.object(r)&&r.constructor===Object&&!r.nodeType&&!r.setInterval},n.regexp=function(r){return l.call(r)==="[object RegExp]"},n.string=function(r){return l.call(r)==="[object String]"},n.base64=function(r){return n.string(r)&&(!r.length||d.test(r))},n.hex=function(r){return n.string(r)&&(!r.length||v.test(r))},n.symbol=function(r){return typeof Symbol=="function"&&l.call(r)==="[object Symbol]"&&typeof e.call(r)=="symbol"},n.bigint=function(r){return typeof BigInt=="function"&&l.call(r)==="[object BigInt]"&&typeof c.call(r)=="bigint"},M=n,M}var R,tr;function mr(){if(tr)return R;tr=1;var g="Function.prototype.bind called on incompatible ",a=Object.prototype.toString,l=Math.max,e="[object Function]",c=function(v,n){for(var r=[],s=0;s<v.length;s+=1)r[s]=v[s];for(var h=0;h<n.length;h+=1)r[h+v.length]=n[h];return r},f=function(v,n){for(var r=[],s=n,h=0;s<v.length;s+=1,h+=1)r[h]=v[s];return r},p=function(d,v){for(var n="",r=0;r<d.length;r+=1)n+=d[r],r+1<d.length&&(n+=v);return n};return R=function(v){var n=this;if(typeof n!="function"||a.apply(n)!==e)throw new TypeError(g+n);for(var r=f(arguments,1),s,h=function(){if(this instanceof s){var D=n.apply(this,c(r,arguments));return Object(D)===D?D:this}return n.apply(v,c(r,arguments))},j=l(0,n.length-r.length),b=[],w=0;w<j;w++)b[w]="$"+w;if(s=Function("binder","return function ("+p(b,",")+"){ return binder.apply(this,arguments); }")(h),n.prototype){var E=function(){};E.prototype=n.prototype,s.prototype=new E,E.prototype=null}return s},R}var B,er;function br(){if(er)return B;er=1;var g=mr();return B=Function.prototype.bind||g,B}var _,nr;function jr(){if(nr)return _;nr=1;var g=Function.prototype.call,a=Object.prototype.hasOwnProperty,l=br();return _=l.call(g,a),_}var H,ir;function Cr(){if(ir)return H;ir=1;/*!
 * node.extend
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * @fileoverview
 * Port of jQuery.extend that actually works on node.js
 */var g=yr(),a=jr(),l=Object.defineProperty,e=Object.getOwnPropertyDescriptor,c=function(d,v,n){l&&v==="__proto__"?l(d,v,{enumerable:!0,configurable:!0,value:n,writable:!0}):d[v]=n},f=function(d,v){if(v==="__proto__")if(a(d,v)){if(e)return e(d,v).value}else return;return d[v]};return H=function p(){var d=arguments[0]||{},v=1,n=arguments.length,r=!1,s,h,j,b,w,E;for(typeof d=="boolean"&&(r=d,d=arguments[1]||{},v=2),typeof d!="object"&&!g.fn(d)&&(d={});v<n;v++)if(s=arguments[v],s!=null){typeof s=="string"&&(s=s.split(""));for(h in s)j=f(d,h),b=f(s,h),d!==b&&(r&&b&&(g.hash(b)||(w=g.array(b)))?(w?(w=!1,E=j&&g.array(j)?j:[]):E=j&&g.hash(j)?j:{},c(d,h,p(r,E,b))):typeof b<"u"&&c(d,h,b))}return d},H}var z,ar;function wr(){return ar||(ar=1,z=Cr()),z}var Er=wr();const $r=S(Er);class T{static initializedDataAttr="data-jp-card-initialized";static cardTemplate=`
    <div class="jp-card-container">
      <div class="jp-card">
        <div class="jp-card-front">
          <div class="jp-card-logo jp-card-elo">
            <div class="e">e</div>
            <div class="l">l</div>
            <div class="o">o</div>
          </div>
          <div class="jp-card-logo jp-card-visa">Visa</div>
          <div class="jp-card-logo jp-card-visaelectron">Visa<div class="elec">Electron</div></div>
          <div class="jp-card-logo jp-card-mastercard">Mastercard</div>
          <div class="jp-card-logo jp-card-maestro">Maestro</div>
          <div class="jp-card-logo jp-card-amex"></div>
          <div class="jp-card-logo jp-card-discover">discover</div>
          <div class="jp-card-logo jp-card-unionpay">UnionPay</div>
          <div class="jp-card-logo jp-card-dinersclub"></div>
          <div class="jp-card-logo jp-card-hipercard">Hipercard</div>
          <div class="jp-card-logo jp-card-troy">troy</div>
          <div class="jp-card-logo jp-card-dankort"><div class="dk"><div class="d"></div><div class="k"></div></div></div>
          <div class="jp-card-logo jp-card-jcb">
            <div class="j">J</div>
            <div class="c">C</div>
            <div class="b">B</div>
          </div>
          <div class="jp-card-lower">
            <div class="jp-card-shiny"></div>
            <div class="jp-card-cvc jp-card-display jp-card-cvc-front">{{cvc}}</div>
            <div class="jp-card-number jp-card-display">{{number}}</div>
            <div class="jp-card-name jp-card-display">{{name}}</div>
            <div class="jp-card-expiry jp-card-display" data-before="{{monthYear}}" data-after="{{validDate}}">{{expiry}}</div>
          </div>
        </div>
        <div class="jp-card-back">
          <div class="jp-card-bar"></div>
          <div class="jp-card-cvc jp-card-display jp-card-cvc-back">{{cvc}}</div>
          <div class="jp-card-shiny"></div>
        </div>
      </div>
    </div>
  `;static cardTypes=["jp-card-amex","jp-card-dankort","jp-card-dinersclub","jp-card-discover","jp-card-unionpay","jp-card-jcb","jp-card-laser","jp-card-maestro","jp-card-mastercard","jp-card-troy","jp-card-unionpay","jp-card-visa","jp-card-visaelectron","jp-card-elo","jp-card-hipercard"];static defaults={formatting:!0,formSelectors:{numberInput:'input[name="number"]',expiryInput:'input[name="expiry"]',cvcInput:'input[name="cvc"]',nameInput:'input[name="name"]'},cardSelectors:{cardContainer:".jp-card-container",card:".jp-card",numberDisplay:".jp-card-number",expiryDisplay:".jp-card-expiry",cvcDisplayFront:".jp-card-cvc-front",cvcDisplayBack:".jp-card-cvc-back",nameDisplay:".jp-card-name"},messages:{validDate:`valid
thru`,monthYear:"month/year"},placeholders:{number:"•••• •••• •••• ••••",cvc:"•••",expiry:"••/••",name:"Full Name"},masks:{cardNumber:!1},classes:{valid:"jp-card-valid",invalid:"jp-card-invalid"},debug:!1};constructor(a){if(this.maskCardNumber=this.maskCardNumber.bind(this),this.options=$r(!0,T.defaults,a),!this.options.form){console.error("Please provide a form");return}if(!this.options.container){console.error("Please provide a container");return}this.$el=typeof this.options.form=="string"?document.querySelector(this.options.form):this.options.form,this.$container=typeof this.options.container=="string"?document.querySelector(this.options.container):this.options.container,!this.$container.getAttribute(T.initializedDataAttr)&&(this.$container.setAttribute(T.initializedDataAttr,!0),this.render(),this.$card=this.$container.querySelector(this.options.cardSelectors.card),this.attachHandlers(),this.handleInitialPlaceholders())}template(a,l){return a.replace(/\{\{(.*?)\}\}/g,(e,c)=>l[c]||"")}render(){this.$container.insertAdjacentHTML("beforeend",this.template(T.cardTemplate,{...this.options.messages,...this.options.placeholders}));for(const[l,e]of Object.entries(this.options.cardSelectors))this["$"+l]=this.$container.querySelector(e),!this["$"+l]&&this.options.debug&&console.warn(`No element found for selector ${e} (${l})`);for(const[l,e]of Object.entries(this.options.formSelectors)){const c=this.options[l]||e,f=this.$el.querySelectorAll(c);f.length===0&&this.options.debug&&console.error(`Card can't find a ${l} in your form.`),this["$"+l]=f.length>1?f:f[0]}if(this.options.formatting&&(L.formatCardNumber(this.$numberInput),L.formatCardCVC(this.$cvcInput),L.formatCardExpiry(this.$expiryInput)),this.options.width){const l=this.$container.querySelector(this.options.cardSelectors.cardContainer),e=parseInt(getComputedStyle(l).width,10);l.style.transform=`scale(${this.options.width/e})`}const a=navigator.userAgent.toLowerCase();a.includes("safari")&&!a.includes("chrome")&&this.$card.classList.add("jp-card-safari"),/MSIE 10\./i.test(navigator.userAgent)&&this.$card.classList.add("jp-card-ie-10"),/rv:11.0/i.test(navigator.userAgent)&&this.$card.classList.add("jp-card-ie-11")}attachHandlers(){const a=[this.validToggler("cardNumber")];this.options.masks.cardNumber&&a.push(this.maskCardNumber),this.bindVal(this.$numberInput,this.$numberDisplay,{fill:!1,filters:a}),this.$numberInput.addEventListener("keyup",e=>{this.handlers.setCardType.call(this,L.fns.cardType(e.target.value))});const l=[e=>e.length===1&&e[0]==="0"?"":e.replace(/\s+/g,"")];l.push(this.validToggler("cardExpiry")),this.bindVal(this.$expiryInput,this.$expiryDisplay,{join:e=>e[0]&&e[0].length===2||e[1]&&e[1]?"/":"",filters:l}),this.bindVal(this.$cvcInput,[this.$cvcDisplayFront,this.$cvcDisplayBack],{filters:this.validToggler("cardCVC")}),this.$cvcInput.addEventListener("focus",()=>this.handlers.flipCard.call(this)),this.$cvcInput.addEventListener("blur",()=>this.handlers.unflipCard.call(this)),this.bindVal(this.$nameInput,this.$nameDisplay,{fill:!1,filters:this.validToggler("cardHolderName"),join:" "})}handleInitialPlaceholders(){for(const a in this.options.formSelectors){let l=this["$"+a];NodeList.prototype.isPrototypeOf(l)&&(l=l[0]),l&&l.value&&(l.dispatchEvent(new Event("paste")),setTimeout(()=>l.dispatchEvent(new Event("keyup")),0))}}bindVal(a,l,e={}){e.fill=e.fill||!1,e.filters=Array.isArray(e.filters)?e.filters:[e.filters],e.join=typeof e.join=="function"?e.join:()=>e.join||"",!(l instanceof NodeList)&&!Array.isArray(l)&&(l=[l]),!(a instanceof NodeList)&&!Array.isArray(a)&&(a=[a]);const c=Array.from(l).map(r=>r.textContent);this.setVal(a,l,c,e);const f=(r,s)=>{r instanceof NodeList||Array.isArray(r)?r.forEach(h=>h.classList.add(s)):r.classList.add(s)},p=(r,s)=>{r instanceof NodeList||Array.isArray(r)?r.forEach(h=>h.classList.remove(s)):r.classList.remove(s)},d=()=>f(l,"jp-card-focused"),v=()=>p(l,"jp-card-focused"),n=()=>this.setVal(a,l,c,e);a.forEach(r=>{r.addEventListener("focus",d),r.addEventListener("blur",v),["keyup","change","paste"].forEach(s=>r.addEventListener(s,n))})}setVal(a,l,e,c){let f=Array.from(a).map(d=>d.value);const p=c.join(f);f=f.join(p),f===p&&(f="");for(const d of c.filters)f=d(f,a,l);for(let d=0;d<l.length;d++){let v=c.fill?f+e[d].substring(f.length):f||e[d];l[d].textContent=v}}handlers={setCardType:a=>{const l=a;document.dispatchEvent(new CustomEvent("card-type-changed",{detail:l})),this.$card.classList.contains(l)||(this.$card.classList.remove("jp-card-unknown"),this.$card.classList.remove(...T.cardTypes),this.$card.classList.add(`jp-card-${l}`),l!=="unknown"?this.$card.classList.add("jp-card-identified"):this.$card.classList.remove("jp-card-identified"),this.cardType=l)},flipCard:()=>{this.$card.classList.add("jp-card-flipped")},unflipCard:()=>{this.$card.classList.remove("jp-card-flipped")}};handle(a){return l=>{const e=Array.from(arguments);return e.unshift(l.target),this.handlers[a].apply(this,e)}}validToggler(a){let l;return a==="cardExpiry"?l=e=>{const c=L.fns.cardExpiryVal(e);return L.fns.validateCardExpiry(c.month,c.year)}:a==="cardCVC"?l=e=>L.fns.validateCardCVC(e,this.cardType):a==="cardNumber"?l=e=>L.fns.validateCardNumber(e):a==="cardHolderName"&&(l=e=>e!==""),(e,c,f)=>{const p=l(e);return this.toggleValidClass(c,p),this.toggleValidClass(f,p),e}}toggleValidClass(a,l){const e=(c,f,p)=>{c instanceof NodeList||Array.isArray(c)?c.forEach(d=>p?d.classList.add(f):d.classList.remove(f)):p?c.classList.add(f):c.classList.remove(f)};e(a,this.options.classes.valid,l),e(a,this.options.classes.invalid,!l)}maskCardNumber(a){const l=this.options.masks.cardNumber,e=a.split(" ");return e.length>=3?(e.forEach((c,f)=>{f!==e.length-1&&(e[f]=e[f].replace(/\d/g,l))}),e.join(" ")):a.replace(/\d/g,l)}getCardType(){return L.fns.cardType(this.$numberInput.value)||"unknown"}}return T});
